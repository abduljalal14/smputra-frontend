{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport { eventBus } from './event-bus.js';\n\n//import api\nimport api from '../api';\nexport default {\n  __name: 'SectionView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    eventBus.$on('selectedCategory', data => {\n      selectedCategory.value = data;\n    });\n    //variable produk\n    const products = ref([]);\n    const selectedCategory = ref(null);\n    const currentPage = ref(1);\n    const lastPage = ref(1);\n    const loading = ref(false);\n\n    // method fetchDataproducts\n    const fetchDataProducts = async (page = 1) => {\n      await api.get('/api/products', {\n        params: {\n          page\n        }\n      }).then(response => {\n        // set response data to state \"products\"\n        products.value = response.data.data.data;\n        currentPage.value = response.data.data.current_page;\n        lastPage.value = response.data.data.last_page;\n      });\n    };\n    const fetchData = async (page = 1) => {\n      loading.value = true;\n      try {\n        const params = {\n          page,\n          category_id: selectedCategory.value\n        };\n        const response = await api.get('products', {\n          params\n        });\n        products.value = response.data.data.data;\n        currentPage.value = response.data.data.current_page;\n        lastPage.value = response.data.data.last_page;\n        error.value = null;\n      } catch (err) {\n        error.value = 'Error fetching data.';\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    //run hook \"onMounted\"\n    onMounted(() => {\n      //call method \"fetchDataproducts\"\n      fetchDataProducts();\n    });\n    const __returned__ = {\n      products,\n      selectedCategory,\n      currentPage,\n      lastPage,\n      loading,\n      fetchDataProducts,\n      fetchData,\n      ref,\n      onMounted,\n      get eventBus() {\n        return eventBus;\n      },\n      get api() {\n        return api;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","eventBus","api","$on","data","selectedCategory","value","products","currentPage","lastPage","loading","fetchDataProducts","page","get","params","then","response","current_page","last_page","fetchData","category_id","error","err"],"sources":["E:/Programming/PROJECT/sm-putra/smputra-frontend/src/components/SectionView.vue"],"sourcesContent":["<template lang=\"\">\r\n    <!-- Section-->\r\n    <section class=\"py-5\">\r\n        <div class=\"container px-4 px-lg-5 mt-5\">\r\n    <div class=\"row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center\">\r\n        <div v-for=\"product in products\" :key=\"product.id\" class=\"col mb-5\">\r\n            <div class=\"card h-100\">\r\n                <!-- Product image-->\r\n                <img class=\"card-img-top\" v-bind:src=\"product.image\" alt=\"...\" />\r\n                <!-- Product details-->\r\n                <div class=\"card-body p-4\">\r\n                    <div class=\"text-center\">\r\n                        <!-- Product name-->\r\n                        <h5 class=\"fw-bolder\">{{ product.name }}</h5>\r\n                        <!-- Product price-->\r\n                        {{ product.price }}\r\n                    </div>\r\n                </div>\r\n                <!-- Product actions-->\r\n                <div class=\"card-footer p-4 pt-0 border-top-0 bg-transparent\">\r\n                    <div class=\"text-center\"><a class=\"btn btn-outline-dark mt-auto\" href=\"#\">Tambah ke Keranjang</a></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- Pagination -->\r\n    <nav aria-label=\"Page navigation example\">\r\n        <ul class=\"pagination\">\r\n          <li class=\"page-item\" :class=\"{ 'disabled': currentPage === 1 }\">\r\n            <a class=\"page-link\" @click=\"fetchDataProducts(currentPage - 1)\" :disabled=\"currentPage === 1\" aria-label=\"Previous\">\r\n              <span aria-hidden=\"true\">&laquo;</span>\r\n            </a>\r\n          </li>\r\n          <li class=\"page-item\" v-for=\"page in lastPage\" :key=\"page\" :class=\"{ 'active': currentPage === page }\">\r\n            <a class=\"page-link\" @click=\"fetchDataProducts(page)\">{{ page }}</a>\r\n          </li>\r\n          <li class=\"page-item\" :class=\"{ 'disabled': currentPage === lastPage }\">\r\n            <a class=\"page-link\" @click=\"fetchDataProducts(currentPage + 1)\" :disabled=\"currentPage === lastPage\" aria-label=\"Next\">\r\n              <span aria-hidden=\"true\">&raquo;</span>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n</div>\r\n\r\n        </section>\r\n</template>\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { eventBus } from './event-bus.js';\r\n\r\n//import api\r\nimport api from '../api';\r\n\r\neventBus.$on('selectedCategory', (data) => {\r\n  selectedCategory.value = data\r\n});\r\n//variable produk\r\nconst products = ref([]);\r\nconst selectedCategory = ref(null);\r\nconst currentPage = ref(1);\r\nconst lastPage = ref(1);\r\nconst loading = ref(false);\r\n\r\n// method fetchDataproducts\r\nconst fetchDataProducts = async (page = 1) => {\r\n  await api.get('/api/products', { params: { page } })\r\n    .then(response => {\r\n      // set response data to state \"products\"\r\n      products.value = response.data.data.data;\r\n      currentPage.value = response.data.data.current_page;\r\n      lastPage.value = response.data.data.last_page;\r\n    });\r\n}\r\n\r\nconst fetchData = async (page = 1) => {\r\n  loading.value = true;\r\n  try {\r\n    const params = { page, category_id: selectedCategory.value };\r\n    const response = await api.get('products', { params });\r\n    products.value = response.data.data.data;\r\n    currentPage.value = response.data.data.current_page;\r\n    lastPage.value = response.data.data.last_page;\r\n    error.value = null;\r\n  } catch (err) {\r\n    error.value = 'Error fetching data.';\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n//run hook \"onMounted\"\r\nonMounted(() => {\r\n    //call method \"fetchDataproducts\"\r\n    fetchDataProducts();\r\n});\r\n</script>\r\n<style></style>"],"mappings":"AAgDA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,SAASC,QAAQ,QAAQ,gBAAgB;;AAEzC;AACA,OAAOC,GAAG,MAAM,QAAQ;;;;;;;IAExBD,QAAQ,CAACE,GAAG,CAAC,kBAAkB,EAAGC,IAAI,IAAK;MACzCC,gBAAgB,CAACC,KAAK,GAAGF,IAAI;IAC/B,CAAC,CAAC;IACF;IACA,MAAMG,QAAQ,GAAGR,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMM,gBAAgB,GAAGN,GAAG,CAAC,IAAI,CAAC;IAClC,MAAMS,WAAW,GAAGT,GAAG,CAAC,CAAC,CAAC;IAC1B,MAAMU,QAAQ,GAAGV,GAAG,CAAC,CAAC,CAAC;IACvB,MAAMW,OAAO,GAAGX,GAAG,CAAC,KAAK,CAAC;;IAE1B;IACA,MAAMY,iBAAiB,GAAG,MAAAA,CAAOC,IAAI,GAAG,CAAC,KAAK;MAC5C,MAAMV,GAAG,CAACW,GAAG,CAAC,eAAe,EAAE;QAAEC,MAAM,EAAE;UAAEF;QAAK;MAAE,CAAC,CAAC,CACjDG,IAAI,CAACC,QAAQ,IAAI;QAChB;QACAT,QAAQ,CAACD,KAAK,GAAGU,QAAQ,CAACZ,IAAI,CAACA,IAAI,CAACA,IAAI;QACxCI,WAAW,CAACF,KAAK,GAAGU,QAAQ,CAACZ,IAAI,CAACA,IAAI,CAACa,YAAY;QACnDR,QAAQ,CAACH,KAAK,GAAGU,QAAQ,CAACZ,IAAI,CAACA,IAAI,CAACc,SAAS;MAC/C,CAAC,CAAC;IACN,CAAC;IAED,MAAMC,SAAS,GAAG,MAAAA,CAAOP,IAAI,GAAG,CAAC,KAAK;MACpCF,OAAO,CAACJ,KAAK,GAAG,IAAI;MACpB,IAAI;QACF,MAAMQ,MAAM,GAAG;UAAEF,IAAI;UAAEQ,WAAW,EAAEf,gBAAgB,CAACC;QAAM,CAAC;QAC5D,MAAMU,QAAQ,GAAG,MAAMd,GAAG,CAACW,GAAG,CAAC,UAAU,EAAE;UAAEC;QAAO,CAAC,CAAC;QACtDP,QAAQ,CAACD,KAAK,GAAGU,QAAQ,CAACZ,IAAI,CAACA,IAAI,CAACA,IAAI;QACxCI,WAAW,CAACF,KAAK,GAAGU,QAAQ,CAACZ,IAAI,CAACA,IAAI,CAACa,YAAY;QACnDR,QAAQ,CAACH,KAAK,GAAGU,QAAQ,CAACZ,IAAI,CAACA,IAAI,CAACc,SAAS;QAC7CG,KAAK,CAACf,KAAK,GAAG,IAAI;MACpB,CAAC,CAAC,OAAOgB,GAAG,EAAE;QACZD,KAAK,CAACf,KAAK,GAAG,sBAAsB;MACtC,CAAC,SAAS;QACRI,OAAO,CAACJ,KAAK,GAAG,KAAK;MACvB;IACF,CAAC;;IAED;IACAN,SAAS,CAAC,MAAM;MACZ;MACAW,iBAAiB,CAAC,CAAC;IACvB,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}