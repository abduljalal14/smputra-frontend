{"ast":null,"code":"import { onMounted, watch, ref } from 'vue';\nimport { useProducts } from \"@/store/products\";\nimport { useCategory } from \"@/store/categories\";\nconst fetchTimeout = 3000;\nexport default {\n  __name: 'ShopView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const productStore = useProducts();\n    const categoryStore = useCategory();\n    const isLoading = ref(true);\n    const showErrorModal = ref(false);\n    const fetchTimeoutId = setTimeout(() => {\n      if (isLoading.value) {\n        showErrorModal.value = true;\n      }\n    }, fetchTimeout);\n    const closeErrorModal = () => {\n      showErrorModal.value = false;\n    };\n    function search() {\n      productStore.fetchDataProducts(productStore.currentPage, productStore.query, categoryStore.selectedCategory);\n    }\n    watch(() => categoryStore.selectedCategory, () => {\n      search(); // Mencari produk setiap kali kategori berubah\n    });\n\n    onMounted(() => {\n      setTimeout(() => {\n        isLoading.value = false;\n        // Ambil data produk dari API \n        productStore.fetchDataProducts();\n        clearTimeout(fetchTimeoutId);\n      }, fetchTimeout);\n      categoryStore.fetchDataCategory();\n    });\n    const __returned__ = {\n      productStore,\n      categoryStore,\n      isLoading,\n      showErrorModal,\n      fetchTimeout,\n      fetchTimeoutId,\n      closeErrorModal,\n      search,\n      onMounted,\n      watch,\n      ref,\n      get useProducts() {\n        return useProducts;\n      },\n      get useCategory() {\n        return useCategory;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","watch","ref","useProducts","useCategory","fetchTimeout","productStore","categoryStore","isLoading","showErrorModal","fetchTimeoutId","setTimeout","value","closeErrorModal","search","fetchDataProducts","currentPage","query","selectedCategory","clearTimeout","fetchDataCategory"],"sources":["F:/Programming/_PROJECT/sm-putra/smputra-frontend/src/views/shop/ShopView.vue"],"sourcesContent":["<template lang=\"\">\r\n   <br>\r\n   <br>\r\n   <br>\r\n<main class=\"mt-5\">\r\n\r\n         <!-- section -->\r\n         <div class=\"mt-8 mb-lg-14 mb-8\">\r\n            <!-- container -->\r\n            <div class=\"container\">\r\n               <!-- row -->\r\n               <div class=\"row gx-10\">\r\n                  <!-- col -->\r\n                  <aside class=\"col-lg-3 col-md-4 mb-6 mb-md-0\">\r\n                     <div class=\"offcanvas offcanvas-start offcanvas-collapse w-md-50\" tabindex=\"-1\" id=\"offcanvasCategory\" aria-labelledby=\"offcanvasCategoryLabel\">\r\n                        <div class=\"offcanvas-header d-lg-none\">\r\n                           <h5 class=\"offcanvas-title\" id=\"offcanvasCategoryLabel\">Filter</h5>\r\n                           <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\r\n                        </div>\r\n                        <div class=\"offcanvas-body ps-lg-2 pt-lg-0\">\r\n                           <div class=\"mb-8\">\r\n                              <!-- title -->\r\n                              <h5 class=\"mb-3\">Kategori</h5>\r\n                              <!-- nav -->\r\n                              <ul class=\"nav nav-category\" id=\"categoryCollapseMenu\">\r\n                                 <li v-for=\"(category, index) in categoryStore.categories\" :key=\"index\"  class=\"nav-item border-bottom w-100\">\r\n                                    <a href=\"#\" class=\"nav-link collapsed\" @click=\"categoryStore.setSelectedCategory(category)\">\r\n                                       {{ category.name }}\r\n                                    </a>          \r\n                                 </li>\r\n                              </ul>\r\n                           </div>\r\n                        </div>\r\n                     </div>\r\n                  </aside>\r\n\r\n\r\n                  <section class=\"col-lg-9 col-md-12\">\r\n                     <!-- card -->\r\n                     <div class=\"card mb-4 bg-light border-0\">\r\n                        <!-- card body -->\r\n                        <div class=\"card-body p-9\">\r\n                           <h2 class=\"mb-0 fs-1\">Kategori Saat Ini</h2>\r\n                           <h2 v-if=\"categoryStore.selectedCategory\" class=\"mb-0 fs-1\">{{ categoryStore.selectedCategory.name }}</h2>\r\n                        </div>\r\n                     </div>\r\n                     <!-- list icon -->\r\n                     <div class=\"d-lg-flex justify-content-between align-items-center\">\r\n                        <div class=\"mb-3 mb-lg-0\">\r\n                           <p class=\"mb-0\">\r\n                              <span class=\"text-dark\">{{ productStore.products.length }}</span>\r\n                              Produk ditemukan\r\n                           </p>\r\n                           <p v-if=\"productStore.error == 'Gagal Fetching Data Produk'\" class=\"mb-0\">\r\n                              <span class=\"text-dark\">{{ productStore.error }}</span>\r\n                           </p>\r\n                        </div>\r\n\r\n                        <!-- icon -->\r\n                        <div class=\"d-md-flex justify-content-between align-items-center\">\r\n                           <div class=\"d-flex align-items-center justify-content-between\">\r\n                              <div class=\"ms-2 d-lg-none\">\r\n                                 <a class=\"btn btn-outline-gray-400 text-muted\" data-bs-toggle=\"offcanvas\" href=\"#offcanvasCategory\" role=\"button\" aria-controls=\"offcanvasCategory\">\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-filter me-2\">\r\n                                       <polygon points=\"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\"></polygon>\r\n                                    </svg>\r\n                                    Kategori\r\n                                 </a>\r\n                              </div>\r\n                           </div>\r\n                        </div>\r\n                     </div>\r\n\r\n                    <!-- Product List -->\r\n                     <!-- row -->\r\n\r\n                     \r\n                     \r\n                     <div v-if=\"isLoading\" class=\"row g-4 row-cols-xl-4 row-cols-lg-3 row-cols-2 row-cols-md-2 mt-2\">\r\n                        <!-- Jika fetch produk masih loading, tampilkan placeholder selama 10 detik -->\r\n                        <div v-for=\"(item, index) in 10\" :key=\"index\" class=\"col\">\r\n                        <product-placeholder></product-placeholder>\r\n                        </div>\r\n                     </div>\r\n\r\n                     <div v-else-if=\"productStore.products.length === 0\" class=\"row g-4 row-cols-xl-4 row-cols-lg-3 row-cols-2 row-cols-md-2 mt-2\">\r\n                        <!-- Jika tidak ada produk, tampilkan placeholder -->\r\n                        <div v-for=\"(item, index) in 10\" :key=\"index\" class=\"col\">\r\n                        <product-placeholder></product-placeholder>\r\n                        </div>\r\n                     </div> \r\n\r\n                     <div v-else class=\"row g-4 row-cols-xl-4 row-cols-lg-3 row-cols-2 row-cols-md-2 mt-2\">\r\n                        <!-- Jika ada produk, tampilkan produk sesuai data yang dimiliki -->\r\n                        <div v-for=\"product in productStore.products\" :key=\"product.id\" class=\"col\">\r\n                        <product-card :product=\"product\"></product-card>\r\n                     </div>\r\n                     </div>\r\n\r\n\r\n                     <div class=\"row mt-8\">\r\n                        <div class=\"col\">\r\n                           <!-- nav -->\r\n                           <nav>\r\n                              <ul class=\"pagination\">\r\n                                 <li class=\"page-item disabled\">\r\n                                    <a class=\"page-link mx-1\" href=\"#\" aria-label=\"Previous\">\r\n                                       <i class=\"feather-icon icon-chevron-left\"></i>\r\n                                    </a>\r\n                                 </li>\r\n                                 <li class=\"page-item\"><a class=\"page-link mx-1 active\" href=\"#\">1</a></li>\r\n                                 <li class=\"page-item\"><a class=\"page-link mx-1\" href=\"#\">2</a></li>\r\n\r\n                                 <li class=\"page-item\"><a class=\"page-link mx-1\" href=\"#\">...</a></li>\r\n                                 <li class=\"page-item\"><a class=\"page-link mx-1\" href=\"#\">12</a></li>\r\n                                 <li class=\"page-item\">\r\n                                    <a class=\"page-link mx-1\" href=\"#\" aria-label=\"Next\">\r\n                                       <i class=\"feather-icon icon-chevron-right\"></i>\r\n                                    </a>\r\n                                 </li>\r\n                              </ul>\r\n                           </nav>\r\n                        </div>\r\n                     </div>\r\n                  </section>\r\n               </div>\r\n            </div>\r\n         </div>\r\n      </main>\r\n\r\n<!-- Modal error -->\r\n<div v-if=\"showErrorModal\" class=\"modal\">\r\n      <div class=\"modal-content\">\r\n        <span class=\"close\" @click=\"closeErrorModal\">&times;</span>\r\n        <p>Pesan error: Gagal mengambil data produk.</p>\r\n      </div>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { onMounted, watch,ref } from 'vue';\r\nimport { useProducts } from \"@/store/products\";\r\nimport { useCategory } from \"@/store/categories\";\r\n\r\nconst productStore = useProducts();\r\nconst categoryStore = useCategory();\r\nconst isLoading = ref(true);\r\nconst showErrorModal = ref(false);\r\nconst fetchTimeout = 3000;\r\n\r\nconst fetchTimeoutId = setTimeout(() => {\r\n      if (isLoading.value) {\r\n        showErrorModal.value = true;\r\n      }\r\n    }, fetchTimeout);\r\n\r\nconst closeErrorModal = () => {\r\n      showErrorModal.value = false;\r\n    };\r\n\r\nfunction search() {\r\n  productStore.fetchDataProducts(productStore.currentPage, productStore.query, categoryStore.selectedCategory);\r\n}\r\n\r\nwatch(() => categoryStore.selectedCategory, () => {\r\n  search(); // Mencari produk setiap kali kategori berubah\r\n});\r\n\r\nonMounted(() => {\r\n   setTimeout(() => {\r\n        isLoading.value = false;\r\n        // Ambil data produk dari API \r\n        productStore.fetchDataProducts();\r\n        clearTimeout(fetchTimeoutId);\r\n      }, fetchTimeout);\r\n  categoryStore.fetchDataCategory()\r\n});\r\n</script>\r\n<style lang=\"\">\r\n    \r\n</style>"],"mappings":"AA2IA,SAASA,SAAS,EAAEC,KAAK,EAACC,GAAG,QAAQ,KAAK;AAC1C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,QAAQ,oBAAoB;AAMhD,MAAMC,YAAY,GAAG,IAAI;;;;;;;IAJzB,MAAMC,YAAY,GAAGH,WAAW,CAAC,CAAC;IAClC,MAAMI,aAAa,GAAGH,WAAW,CAAC,CAAC;IACnC,MAAMI,SAAS,GAAGN,GAAG,CAAC,IAAI,CAAC;IAC3B,MAAMO,cAAc,GAAGP,GAAG,CAAC,KAAK,CAAC;IAGjC,MAAMQ,cAAc,GAAGC,UAAU,CAAC,MAAM;MAClC,IAAIH,SAAS,CAACI,KAAK,EAAE;QACnBH,cAAc,CAACG,KAAK,GAAG,IAAI;MAC7B;IACF,CAAC,EAAEP,YAAY,CAAC;IAEpB,MAAMQ,eAAe,GAAGA,CAAA,KAAM;MACxBJ,cAAc,CAACG,KAAK,GAAG,KAAK;IAC9B,CAAC;IAEL,SAASE,MAAMA,CAAA,EAAG;MAChBR,YAAY,CAACS,iBAAiB,CAACT,YAAY,CAACU,WAAW,EAAEV,YAAY,CAACW,KAAK,EAAEV,aAAa,CAACW,gBAAgB,CAAC;IAC9G;IAEAjB,KAAK,CAAC,MAAMM,aAAa,CAACW,gBAAgB,EAAE,MAAM;MAChDJ,MAAM,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC;;IAEFd,SAAS,CAAC,MAAM;MACbW,UAAU,CAAC,MAAM;QACZH,SAAS,CAACI,KAAK,GAAG,KAAK;QACvB;QACAN,YAAY,CAACS,iBAAiB,CAAC,CAAC;QAChCI,YAAY,CAACT,cAAc,CAAC;MAC9B,CAAC,EAAEL,YAAY,CAAC;MACpBE,aAAa,CAACa,iBAAiB,CAAC,CAAC;IACnC,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}