{"ast":null,"code":"import { useCart } from '@/store/cart';\nimport { useOrder } from '@/store/order';\nimport { useProducts } from '@/store/products';\nimport { watchEffect, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useContact } from '@/store/contact';\nexport default {\n  __name: 'IndexView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const cartStore = useCart();\n    const orderStore = useOrder();\n    const productStore = useProducts();\n    const contactStore = useContact();\n    const name = ref(orderStore.customerName);\n    const makeOrder = () => {\n      orderStore.storeOrder(router, cartStore.cartItems);\n      cartStore.cartItems = [];\n      contactStore.openWhatsApp(orderStore.customerName, orderStore.customerPhone, orderStore.customerAddres, orderStore.storeLocation, orderStore.orderMethod, cartStore.cartItems, orderStore.total);\n      openWhatsApp();\n    };\n    const phoneNumber = ref('6282325339189'); // Ganti nomor telepon dengan nomor yang sesuai\n    const messageText = ref(`*Detail Invoice*\n\nNama   : ${name.value}\n\nDetail Item:\nProduk ID : ${String(cartStore.cartItems[0].product_id)}\nProduk ID : ${String(cartStore.cartItems[1].product_id)}`);\n    const openWhatsApp = () => {\n      const whatsappLink = `https://wa.me/${phoneNumber.value}?text=${encodeURIComponent(messageText.value)}`;\n      window.open(whatsappLink, '_blank');\n    };\n    watchEffect(() => {\n      // Hitung subtotal setiap kali cartItems berubah\n      orderStore.subtotal = Object.values(cartStore.cartItems).reduce((total, cartItem) => {\n        const product = productStore.products.find(product => product.id === cartItem.product_id);\n        if (product) {\n          const itemTotal = product.price * cartItem.qty;\n          total += itemTotal;\n        }\n        return total;\n      }, 0);\n    });\n    const __returned__ = {\n      router,\n      cartStore,\n      orderStore,\n      productStore,\n      contactStore,\n      name,\n      makeOrder,\n      phoneNumber,\n      messageText,\n      openWhatsApp,\n      get useCart() {\n        return useCart;\n      },\n      get useOrder() {\n        return useOrder;\n      },\n      get useProducts() {\n        return useProducts;\n      },\n      watchEffect,\n      ref,\n      get useRouter() {\n        return useRouter;\n      },\n      get useContact() {\n        return useContact;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["useCart","useOrder","useProducts","watchEffect","ref","useRouter","useContact","router","cartStore","orderStore","productStore","contactStore","name","customerName","makeOrder","storeOrder","cartItems","openWhatsApp","customerPhone","customerAddres","storeLocation","orderMethod","total","phoneNumber","messageText","value","String","product_id","whatsappLink","encodeURIComponent","window","open","subtotal","Object","values","reduce","cartItem","product","products","find","id","itemTotal","price","qty"],"sources":["E:/Programming/PROJECT/sm-putra/smputra-frontend/src/views/checkout/IndexView.vue"],"sourcesContent":["<template lang=\"\">\r\n    <br>\r\n    <br>\r\n    <br>\r\n<section class=\"mb-lg-14 mb-8 mt-5\">\r\n            <div class=\"container\">\r\n               <!-- row -->\r\n               <div class=\"row\">\r\n                  <!-- col -->\r\n                  <div class=\"col-12\">\r\n                     <div>\r\n                        <div class=\"mb-8\">\r\n                           <!-- text -->\r\n                           <h1 class=\"fw-bold mb-0\">Checkout</h1>\r\n                        </div>\r\n                     </div>\r\n                  </div>\r\n               </div>\r\n               <div>\r\n                  <!-- row -->\r\n                  <div class=\"row\">\r\n                     <div class=\"col-lg-6 col-md-12\">\r\n                           <div class=\"px-6 py-4 card shadow-sm\">\r\n                              <h5 class=\" bg-transparent mb-2\">Isi Form Pemesan</h5>\r\n                        <!-- Nama -->\r\n                        <div class=\"mb-3\">\r\n                        <label class=\"form-label\" for=\"textInput\">Nama</label>\r\n                        <input v-model=\"orderStore.customerName\" type=\"text\" id=\"name-input\" class=\"form-control\" placeholder=\"Nama\">\r\n                        </div>\r\n                        <!-- Phone Input --> \r\n                        <div class=\"mb-3\"> \r\n                        <label for=\"telinput\" class=\"form-label\">No. Handphone</label>\r\n                        <input v-model=\"orderStore.customerPhone\" class=\"form-control\" type=\"tel\" id=\"telinput\">\r\n                        </div>\r\n                        <!-- Textarea -->\r\n                        <div class=\"mb-3\">\r\n                        <label for=\"textarea-input\" class=\"form-label\">Alamat Lengkap</label>\r\n                        <textarea v-model=\"orderStore.customerAddres\" class=\"form-control\" id=\"addres-input\" rows=\"5\"></textarea>\r\n                        </div>\r\n\r\n                        <!-- Pilih Toko -->\r\n                        <div class=\"mb-3\">\r\n                        <label class=\"form-label\" for=\"selectOne\">Pilih Toko</label>\r\n                        <select v-model=\"orderStore.storeLocation\" class=\"form-select\" aria-label=\"Default select example\">\r\n                            <option value=\"Sari Mulya Pasarbatang\">Toko Sari Mulya Pasarbatang</option>\r\n                            <option value=\"Sari Mulya Limbangan\">Toko Sari Mulya Limbangan</option>\r\n                        </select>\r\n                        </div>\r\n                        <!-- Pilih Metode -->\r\n                        <div class=\"mb-3\">\r\n                        <label class=\"form-label\" for=\"selectOne\">Pilih Metode Pengiriman</label>\r\n                        <select v-model=\"orderStore.orderMethod\" class=\"form-select\" aria-label=\"Default select example\">\r\n                            <option value=\"COD\">COD</option>\r\n                            <option value=\"Ambil ke Toko\">Ambil ke Toko</option>\r\n                        </select>\r\n                        </div>\r\n                     </div>\r\n                        </div>\r\n\r\n                     <div class=\"col-12 col-md-12  col-lg-6\">\r\n                        <div class=\"mt-4 mt-lg-0\">\r\n                           <div class=\"card shadow-sm\">\r\n                              <h5 class=\"px-6 py-4 bg-transparent mb-0\">Detail Pesanan</h5>\r\n                              <ul class=\"list-group list-group-flush\">\r\n                                 <!-- list group item -->\r\n                                 <li v-for=\"(cartItem, index) in cartStore.cartItems\" :key=\"index\" class=\"list-group-item px-4 py-3\">\r\n                                    <div class=\"row align-items-center\">\r\n                                       <div class=\"col-2 col-md-2\">\r\n                                          <img v-bind:src=\"productStore.products[cartItem.product_id].image\" alt=\"Ecommerce\" class=\"img-fluid\">\r\n                                       </div>\r\n                                       <div class=\"col-5 col-md-5\">\r\n                                          <h6 class=\"mb-0\">{{ productStore.products[cartItem.product_id].name }}</h6>\r\n                                          <span><small class=\"text-muted\">{{ productStore.products[cartItem.product_id].category.name }}</small></span>\r\n                                       </div>\r\n                                       <div class=\"col-2 col-md-2 text-center text-muted\">\r\n                                          <span>{{  cartItem.qty }}</span>\r\n                                       </div>\r\n                                       <div class=\"col-3 text-lg-end text-start text-md-end col-md-3\">\r\n                                          <span class=\"fw-bold\">Rp {{ productStore.products[cartItem.product_id].price * cartItem.qty }}</span>\r\n                                       </div>\r\n                                    </div>\r\n                                 </li>\r\n                              </ul>\r\n\r\n                              <h5 class=\"px-6 py-4 bg-transparent mb-0\">Keterangan</h5>\r\n                              <div class=\"card mb-2\">\r\n     <!-- list group -->\r\n     <ul class=\"list-group list-group-flush\">\r\n        <!-- list group item -->\r\n        <li class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n           <div class=\"me-auto\">\r\n              <div>Item Subtotal</div>\r\n           </div>\r\n           <span>Rp {{ orderStore.subtotal }}</span>\r\n        </li>\r\n        <!-- list group item -->\r\n   <li v-if=\"orderStore.orderMethod == 'COD'\" class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n      <div class=\"me-auto\">\r\n         <div>Biaya Ongkir</div>\r\n      </div>\r\n      <span>Rp. {{ orderStore.ongkir }}</span>\r\n   </li>\r\n   <!-- list group item -->\r\n   <li class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n      <div class=\"me-auto\">\r\n         <div class=\"fw-bold\">Total</div>\r\n      </div>\r\n      <span v-if=\"orderStore.orderMethod != 'COD'\" class=\"fw-bold\">Rp. {{ orderStore.subtotal }}</span>\r\n      <span v-else class=\"fw-bold\">Rp. {{ orderStore.getTotal }}</span>\r\n   </li>\r\n    </ul>\r\n </div>\r\n <div class=\"d-grid mb-1 mt-4\">\r\n    <!-- btn -->\r\n<div v-if=\"orderStore.invalid || cartStore.cartItems.length === 0\" class=\"alert alert-danger\" role=\"alert\">Lengkapi Data untuk melakukan Checkout</div>\r\n   <button v-else class=\"btn btn-primary btn-lg d-flex justify-content-between align-items-center\" type=\"submit\" data-bs-toggle=\"modal\" data-bs-target=\"#detailOrderModal\">\r\n    Go to Checkout \r\n    <span class=\"fw-bold\">Rp. {{ orderStore.getTotal }}</span>\r\n   </button>\r\n </div>\r\n                              \r\n                           </div>\r\n                        </div>\r\n                     </div>\r\n                  </div>\r\n               </div>\r\n            </div>\r\n         </section>\r\n\r\n<!-- detail accept order  -->\r\n<div class=\"modal fade\" id=\"detailOrderModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-sm modal-dialog-scrollable\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\" id=\"exampleModalLabel\">Data Pemesan</h5>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <pre>\r\n            <h3 class=\"text-center\">INVOICE</h3>\r\n            <ul class=\"list-group\">\r\n            <li class=\"list-group-item active\">Detail Customer</li>\r\n            <li class=\"list-group-item\">Nama    : {{ orderStore.customerName }}</li>\r\n            <li class=\"list-group-item\">No. HP  : {{ orderStore.customerPhone }}</li>\r\n            <li class=\"list-group-item\">Alamat  : {{ orderStore.customerAddres }}</li>\r\n            <li class=\"list-group-item active\">Toko & Metode</li>\r\n            <li class=\"list-group-item\">Toko    : {{ orderStore.storeLocation }}</li>\r\n            <li class=\"list-group-item\">Metode  : {{ orderStore.orderMethod }}</li>\r\n            <li class=\"list-group-item active\">Daftar Belanjaan</li>\r\n            <li v-for=\"(cartItem, index) in cartStore.cartItems\" :key=\"index\" class=\"list-group-item\">{{ productStore.products[cartItem.product_id].name }} {{ cartItem.qty }}x@{{ productStore.products[cartItem.product_id].price }} : {{ productStore.products[cartItem.product_id].price* cartItem.qty }}</li>\r\n            \r\n            <li v-if=\"orderStore.orderMethod == 'COD'\" class=\"list-group-item\">Ongkos Kirim  : {{ orderStore.ongkir }}</li>\r\n            <li class=\"list-group-item active\"><h4 class=\"ml-auto\" >Total  : Rp {{ orderStore.total }}</h4></li>\r\n         </ul> \r\n        </pre>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n         <div data-bs-dismiss=\"modal\" >\r\n            <button @click=\"makeOrder()\" type=\"submit\" class=\"btn btn-success btn-lg d-flex justify-content-between align-items-center\">Buat Pesanan</button>\r\n         </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n<script setup>\r\nimport { useCart } from '@/store/cart'\r\nimport { useOrder } from '@/store/order'\r\nimport { useProducts } from '@/store/products';\r\nimport { watchEffect, ref } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { useContact } from '@/store/contact'\r\n\r\nconst router = useRouter()\r\nconst cartStore = useCart()\r\nconst orderStore = useOrder()\r\nconst productStore = useProducts()\r\nconst contactStore = useContact()\r\nconst name = ref(orderStore.customerName)\r\n\r\nconst makeOrder = () => {\r\n  orderStore.storeOrder(router, cartStore.cartItems)\r\n  cartStore.cartItems = []\r\n  contactStore.openWhatsApp(orderStore.customerName,orderStore.customerPhone,orderStore.customerAddres,orderStore.storeLocation,orderStore.orderMethod,cartStore.cartItems,orderStore.total)\r\n  openWhatsApp()\r\n};\r\n\r\nconst phoneNumber = ref('6282325339189'); // Ganti nomor telepon dengan nomor yang sesuai\r\nconst messageText = ref(`*Detail Invoice*\r\n\r\nNama   : ${(name.value)}\r\n\r\nDetail Item:\r\nProduk ID : ${String(cartStore.cartItems[0].product_id)}\r\nProduk ID : ${String(cartStore.cartItems[1].product_id)}`\r\n); \r\n\r\nconst openWhatsApp = () => {\r\n  const whatsappLink = `https://wa.me/${phoneNumber.value}?text=${encodeURIComponent(messageText.value)}`;\r\n  window.open(whatsappLink, '_blank');\r\n};\r\n\r\n\r\n\r\nwatchEffect(() => {\r\n  // Hitung subtotal setiap kali cartItems berubah\r\n  orderStore.subtotal = Object.values(cartStore.cartItems).reduce((total, cartItem) => {\r\n    const product = productStore.products.find(product => product.id === cartItem.product_id);\r\n    if (product) {\r\n        const itemTotal = product.price * cartItem.qty;\r\n        total += itemTotal;\r\n    }\r\n\r\n    return total;\r\n}, 0);\r\n});\r\n\r\n</script>\r\n<style lang=\"css\">\r\n.whatsapp-ico{\r\n    fill: white;\r\n    width: 50px;\r\n    height: 50px;\r\n    padding: 3px;\r\n    background-color: #4dc247;\r\n    border-radius: 50%;\r\n    box-shadow: 2px 2px 6px rgba(0,0,0,0.4);\r\n    /* box-shadow: 2px 2px 11px rgba(0,0,0,0.7); */\r\n    position: fixed;\r\n    bottom: 20px;\r\n    right : 20px;\r\n    z-index: 10;\r\n}\r\n\r\n.whatsapp-ico:hover{\r\n    box-shadow: 2px 2px 11px rgba(0,0,0,0.7);\r\n}\r\n</style>"],"mappings":"AAsKA,SAASA,OAAO,QAAQ,cAAc;AACtC,SAASC,QAAQ,QAAQ,eAAe;AACxC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,EAAEC,GAAG,QAAQ,KAAK;AACtC,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,UAAU,QAAQ,iBAAiB;;;;;;;IAE5C,MAAMC,MAAM,GAAGF,SAAS,CAAC,CAAC;IAC1B,MAAMG,SAAS,GAAGR,OAAO,CAAC,CAAC;IAC3B,MAAMS,UAAU,GAAGR,QAAQ,CAAC,CAAC;IAC7B,MAAMS,YAAY,GAAGR,WAAW,CAAC,CAAC;IAClC,MAAMS,YAAY,GAAGL,UAAU,CAAC,CAAC;IACjC,MAAMM,IAAI,GAAGR,GAAG,CAACK,UAAU,CAACI,YAAY,CAAC;IAEzC,MAAMC,SAAS,GAAGA,CAAA,KAAM;MACtBL,UAAU,CAACM,UAAU,CAACR,MAAM,EAAEC,SAAS,CAACQ,SAAS,CAAC;MAClDR,SAAS,CAACQ,SAAS,GAAG,EAAE;MACxBL,YAAY,CAACM,YAAY,CAACR,UAAU,CAACI,YAAY,EAACJ,UAAU,CAACS,aAAa,EAACT,UAAU,CAACU,cAAc,EAACV,UAAU,CAACW,aAAa,EAACX,UAAU,CAACY,WAAW,EAACb,SAAS,CAACQ,SAAS,EAACP,UAAU,CAACa,KAAK,CAAC;MAC1LL,YAAY,CAAC,CAAC;IAChB,CAAC;IAED,MAAMM,WAAW,GAAGnB,GAAG,CAAC,eAAe,CAAC,CAAC,CAAC;IAC1C,MAAMoB,WAAW,GAAGpB,GAAG,CAAE;AACzB;AACA,WAAYQ,IAAI,CAACa,KAAO;AACxB;AACA;AACA,cAAcC,MAAM,CAAClB,SAAS,CAACQ,SAAS,CAAC,CAAC,CAAC,CAACW,UAAU,CAAE;AACxD,cAAcD,MAAM,CAAClB,SAAS,CAACQ,SAAS,CAAC,CAAC,CAAC,CAACW,UAAU,CAAE,EACxD,CAAC;IAED,MAAMV,YAAY,GAAGA,CAAA,KAAM;MACzB,MAAMW,YAAY,GAAI,iBAAgBL,WAAW,CAACE,KAAM,SAAQI,kBAAkB,CAACL,WAAW,CAACC,KAAK,CAAE,EAAC;MACvGK,MAAM,CAACC,IAAI,CAACH,YAAY,EAAE,QAAQ,CAAC;IACrC,CAAC;IAIDzB,WAAW,CAAC,MAAM;MAChB;MACAM,UAAU,CAACuB,QAAQ,GAAGC,MAAM,CAACC,MAAM,CAAC1B,SAAS,CAACQ,SAAS,CAAC,CAACmB,MAAM,CAAC,CAACb,KAAK,EAAEc,QAAQ,KAAK;QACnF,MAAMC,OAAO,GAAG3B,YAAY,CAAC4B,QAAQ,CAACC,IAAI,CAACF,OAAO,IAAIA,OAAO,CAACG,EAAE,KAAKJ,QAAQ,CAACT,UAAU,CAAC;QACzF,IAAIU,OAAO,EAAE;UACT,MAAMI,SAAS,GAAGJ,OAAO,CAACK,KAAK,GAAGN,QAAQ,CAACO,GAAG;UAC9CrB,KAAK,IAAImB,SAAS;QACtB;QAEA,OAAOnB,KAAK;MAChB,CAAC,EAAE,CAAC,CAAC;IACL,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}