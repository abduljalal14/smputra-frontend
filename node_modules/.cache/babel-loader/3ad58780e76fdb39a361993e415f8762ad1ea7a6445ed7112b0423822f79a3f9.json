{"ast":null,"code":"import { useOrder } from \"@/store/order\";\nimport { formatPrice } from \"@/utils/currency\";\nimport { useProducts } from '@/store/products';\nimport { onMounted, ref, watchEffect } from 'vue';\nexport default {\n  __name: 'OrderList',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const orderStore = useOrder();\n    const productStore = useProducts();\n    const subTotal = ref(0);\n    const deleteOrder = categoryId => {\n      if (window.confirm(\"Kamu yakin ingin menghapus order ini?\")) {\n        orderStore.deleteCategory(categoryId);\n      }\n    };\n    const detailOrder = order => {\n      orderStore.order = order;\n    };\n    watchEffect(() => {\n      try {\n        subTotal.value = 0;\n        if (orderStore.order && orderStore.order.order_details && productStore.products) {\n          orderStore.order.order_details.forEach(item => {\n            const product = item.product;\n            if (product) {\n              subTotal.value += product.price * item.qty;\n            }\n          });\n        }\n      } catch (error) {\n        console.error('Error in watchEffect:', error);\n      }\n    });\n    onMounted(() => {\n      orderStore.fetchDataOrders();\n    });\n    const __returned__ = {\n      orderStore,\n      productStore,\n      subTotal,\n      deleteOrder,\n      detailOrder,\n      get useOrder() {\n        return useOrder;\n      },\n      get formatPrice() {\n        return formatPrice;\n      },\n      get useProducts() {\n        return useProducts;\n      },\n      onMounted,\n      ref,\n      watchEffect\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["useOrder","formatPrice","useProducts","onMounted","ref","watchEffect","orderStore","productStore","subTotal","deleteOrder","categoryId","window","confirm","deleteCategory","detailOrder","order","value","order_details","products","forEach","item","product","price","qty","error","console","fetchDataOrders"],"sources":["E:/Programming/PROJECT/sm-putra/smputra-frontend/src/views/dashboard/OrderList.vue"],"sourcesContent":["<template lang=\"\">\r\n    ORDER LIST\r\n    <hr>\r\n <table class=\"table table-bordered\">\r\n                             <thead class=\"bg-dark text-white\">\r\n                                 <tr>\r\n                                     <th scope=\"col\">Order ID</th> \r\n                                     <th scope=\"col\">Name</th> \r\n                                     <th scope=\"col\">Tanggal Order</th>\r\n                                     <th scope=\"col\" style=\"width:30%\">Actions</th>\r\n                                 </tr>\r\n                             </thead>\r\n                             <tbody>\r\n                                 <tr v-if=\"orderStore.orders.length == 0\">\r\n                                     <td colspan=\"4\" class=\"text-center\">\r\n                                         <div class=\"alert alert-danger mb-0\">\r\n                                             Data Belum Tersedia!\r\n                                         </div>\r\n                                     </td>\r\n                                 </tr>\r\n                                 <tr v-else v-for=\"(order, index) in orderStore.orders\" :key=\"index\">\r\n                                     <td>{{ order.order_id }}</td>\r\n                                     <td>{{ order.customer_name }}</td>\r\n                                     <td>{{ order.created_at }}</td>\r\n                                     <td class=\"text-center\">\r\n                                         <button @click=\"deleteOrder(order.id)\" class=\"btn btn-sm btn-danger rounded-sm shadow border-0 me-2\">DELETE</button>\r\n                                         <button @click=\"detailOrder(order)\" data-bs-toggle=\"modal\" data-bs-target=\"#detailOrderModal\" class=\"btn btn-sm btn-primary rounded-sm shadow border-0 me-2\">DETAIL</button>\r\n                                     </td>\r\n                                 </tr>\r\n                             </tbody>\r\n                         </table>\r\n\r\n<!-- Modal Show -->\r\n<div class=\"modal fade\" id=\"detailOrderModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\" id=\"exampleModalLabel\">Detail Order</h5>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <div class=\"px-6 py-4 card shadow-sm\">\r\n                  \r\n                  <h5 class=\" bg-transparent mt-2 text-primary\">Informasi Pengiriman</h5>\r\n                  <h6 class=\" bg-transparent\">{{ orderStore.order.shipping_method }} - ID Pemesanan: {{ orderStore.order.order_id }}</h6>\r\n                  \r\n                  <h5 class=\" bg-transparent mt-2 text-primary\">Alamat Pengiriman</h5>\r\n                  <h6 class=\" bg-transparent\">{{ orderStore.order.customer_name }}</h6>\r\n                  <h6 class=\" bg-transparent\">{{ orderStore.order.customer_phone }}</h6>\r\n                  <h6 class=\" bg-transparent\">{{ orderStore.order.customer_address }}</h6>\r\n\r\n                  <h5 class=\"px-6 py-4 bg-transparent mb-0 text-primary\" >Rincian Item</h5>\r\n                     <ul class=\"list-group list-group-flush\">\r\n                        <!-- list group item -->\r\n                         <!-- list group item -->\r\n                         <li v-for=\"(item, index) in orderStore.order.order_details\" :key=\"index\" class=\"list-group-item px-4 py-3\">\r\n                           <div class=\"row align-items-center\"> \r\n                              <div class=\"col-2 col-md-2\">\r\n                                 <img v-bind:src=\"item.product.image\" alt=\"Ecommerce\" class=\"img-fluid\">\r\n                              </div>\r\n                              <div class=\"col-5 col-md-5\">\r\n                                 <h6 class=\"mb-0\">{{ item.product.name }}</h6>\r\n                                 <!-- <span><small class=\"text-muted\">{{ item.product.category.name }}</small></span> -->\r\n                              </div>\r\n                              <div class=\"col-2 col-md-2 text-center text-muted\">\r\n                                 <span>{{  item.qty }}</span>\r\n                              </div>\r\n                              <div class=\"col-3 text-lg-end text-start text-md-end col-md-3\">\r\n                                 <span class=\"fw-bold\">{{ formatPrice(item.product.price * item.qty) }}</span>\r\n                              </div>\r\n                           </div>\r\n                        </li>\r\n                     </ul>\r\n                     <h5 class=\"px-6 py-4 bg-transparent mb-0 text-primary\">Keterangan</h5>\r\n                     <div class=\"card mb-2\">\r\n                        <!-- list group -->\r\n                        <ul class=\"list-group list-group-flush\">\r\n                           <!-- list group item -->\r\n                           <li class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n                              <div class=\"me-auto\">\r\n                                 <div>Item Subtotal</div>\r\n                              </div>\r\n                              <span>{{ formatPrice(subTotal) }}</span>\r\n                           </li>\r\n                           <!-- list group item -->\r\n                           <li v-if=\"orderStore.order.shipping_method == 'COD'\" class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n                              <div class=\"me-auto\">\r\n                                 <div>Biaya Ongkir</div>\r\n                              </div>\r\n                              <span>{{ formatPrice(orderStore.ongkir) }}</span>\r\n                           </li>\r\n                           <!-- list group item -->\r\n                           <li class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n                              <div class=\"me-auto\">\r\n                                 <div class=\"fw-bold\">Total</div>\r\n                              </div>\r\n                              <span v-if=\"orderStore.order.shipping_method != 'COD'\" class=\"fw-bold\">{{ formatPrice(subTotal) }}</span>\r\n                              <span v-else class=\"fw-bold\">{{ formatPrice(subTotal+orderStore.ongkir) }}</span>\r\n                           </li>\r\n                        </ul>\r\n                     </div>\r\n        </div>\r\n\r\n\r\n\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button @click=\"deleteOrder(order.id)\" type=\"submit\" class=\"btn btn-danger\"  data-bs-dismiss=\"modal\">Delete</button> \r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n </template>\r\n \r\n<script setup>\r\nimport { useOrder } from \"@/store/order\"\r\nimport { formatPrice } from \"@/utils/currency\";\r\nimport { useProducts } from '@/store/products';\r\nimport { onMounted, ref, watchEffect } from 'vue';\r\n\r\nconst orderStore = useOrder()\r\nconst productStore = useProducts()\r\n\r\nconst subTotal = ref(0);\r\n\r\nconst deleteOrder = (categoryId) => {\r\n  if (window.confirm(\"Kamu yakin ingin menghapus order ini?\")) {\r\n    orderStore.deleteCategory(categoryId);\r\n  }\r\n};\r\nconst detailOrder = (order) => {\r\n    orderStore.order = order\r\n};\r\n\r\n\r\nwatchEffect(() => {\r\n   try {\r\n      subTotal.value = 0;\r\n\r\n      if (orderStore.order && orderStore.order.order_details && productStore.products) {\r\n         orderStore.order.order_details.forEach(item => {\r\n            const product = item.product;\r\n            if (product) {\r\n               subTotal.value += product.price * item.qty;\r\n            }\r\n         });\r\n      }\r\n   } catch (error) {\r\n      console.error('Error in watchEffect:', error);\r\n   }\r\n});\r\n\r\nonMounted(() => {\r\n    orderStore.fetchDataOrders();\r\n});\r\n\r\n</script>\r\n \r\n<style lang=\"\">\r\n </style>"],"mappings":"AAoHA,SAASA,QAAQ,QAAQ,eAAe;AACxC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,SAAS,EAAEC,GAAG,EAAEC,WAAW,QAAQ,KAAK;;;;;;;IAEjD,MAAMC,UAAU,GAAGN,QAAQ,CAAC,CAAC;IAC7B,MAAMO,YAAY,GAAGL,WAAW,CAAC,CAAC;IAElC,MAAMM,QAAQ,GAAGJ,GAAG,CAAC,CAAC,CAAC;IAEvB,MAAMK,WAAW,GAAIC,UAAU,IAAK;MAClC,IAAIC,MAAM,CAACC,OAAO,CAAC,uCAAuC,CAAC,EAAE;QAC3DN,UAAU,CAACO,cAAc,CAACH,UAAU,CAAC;MACvC;IACF,CAAC;IACD,MAAMI,WAAW,GAAIC,KAAK,IAAK;MAC3BT,UAAU,CAACS,KAAK,GAAGA,KAAK;IAC5B,CAAC;IAGDV,WAAW,CAAC,MAAM;MACf,IAAI;QACDG,QAAQ,CAACQ,KAAK,GAAG,CAAC;QAElB,IAAIV,UAAU,CAACS,KAAK,IAAIT,UAAU,CAACS,KAAK,CAACE,aAAa,IAAIV,YAAY,CAACW,QAAQ,EAAE;UAC9EZ,UAAU,CAACS,KAAK,CAACE,aAAa,CAACE,OAAO,CAACC,IAAI,IAAI;YAC5C,MAAMC,OAAO,GAAGD,IAAI,CAACC,OAAO;YAC5B,IAAIA,OAAO,EAAE;cACVb,QAAQ,CAACQ,KAAK,IAAIK,OAAO,CAACC,KAAK,GAAGF,IAAI,CAACG,GAAG;YAC7C;UACH,CAAC,CAAC;QACL;MACH,CAAC,CAAC,OAAOC,KAAK,EAAE;QACbC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAChD;IACH,CAAC,CAAC;IAEFrB,SAAS,CAAC,MAAM;MACZG,UAAU,CAACoB,eAAe,CAAC,CAAC;IAChC,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}