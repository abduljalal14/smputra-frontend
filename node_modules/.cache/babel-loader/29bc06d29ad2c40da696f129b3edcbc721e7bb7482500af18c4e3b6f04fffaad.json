{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { useProducts } from \"@/store/products\";\nimport { useCategory } from '@/store/categories';\n//import api\nimport api from \"../../api\";\nimport { useRouter } from 'vue-router';\n\n//init router\n\nexport default {\n  __name: 'CreateProduct',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const categoryStore = useCategory();\n    const productStore = useProducts();\n\n    //define state\n    const image = ref(\"\");\n    const name = ref(\"\");\n    const desc = ref(\"\");\n    const price = ref(\"\");\n    const category_id = ref(\"\");\n    const errors = ref([]);\n\n    //method for handle file changes\n    const handleFileChange = e => {\n      //assign file to state\n      image.value = e.target.files[0];\n    };\n\n    //method \"storePost\"\n    const storeProduct = async () => {\n      //init formData\n      let formData = new FormData();\n\n      //assign state value to formData\n      formData.append(\"image\", image.value);\n      formData.append(\"name\", name.value);\n      formData.append(\"desc\", desc.value);\n      formData.append(\"price\", price.value);\n      formData.append(\"category_id\", category_id.value);\n\n      //store data with API\n      await api.post('/api/products', formData).then(() => {\n        //redirect\n        router.push({\n          path: \"/dashboard/products\"\n        });\n      }).catch(error => {\n        //assign response error data to state \"errors\"\n        errors.value = error.response.data;\n      });\n    };\n    const __returned__ = {\n      router,\n      categoryStore,\n      productStore,\n      image,\n      name,\n      desc,\n      price,\n      category_id,\n      errors,\n      handleFileChange,\n      storeProduct,\n      get useProducts() {\n        return useProducts;\n      },\n      get useCategory() {\n        return useCategory;\n      },\n      get api() {\n        return api;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["useProducts","useCategory","api","useRouter","router","categoryStore","productStore","image","ref","name","desc","price","category_id","errors","handleFileChange","e","value","target","files","storeProduct","formData","FormData","append","post","then","push","path","catch","error","response","data"],"sources":["E:/Programming/PROJECT/sm-putra/smputra-frontend/src/views/dashboard/CreateProduct.vue"],"sourcesContent":["<script setup>\r\n    import { useProducts } from \"@/store/products\"\r\n    import { useCategory } from '@/store/categories';\r\n    //import api\r\n    import api from \"../../api\";\r\n    import { useRouter } from 'vue-router';\r\n\r\n    //init router\r\n    const router = useRouter();\r\n    \r\n    const categoryStore = useCategory();\r\n    const productStore = useProducts();\r\n\r\n    //define state\r\n    const image = ref(\"\");\r\n    const name = ref(\"\");\r\n    const desc = ref(\"\");\r\n    const price = ref(\"\");\r\n    const category_id = ref(\"\");\r\n\r\n    const errors = ref([]);\r\n\r\n    //method for handle file changes\r\n    const handleFileChange = (e) => {\r\n        //assign file to state\r\n        image.value = e.target.files[0];\r\n    };\r\n\r\n    //method \"storePost\"\r\n    const storeProduct = async () => {\r\n\r\n        //init formData\r\n        let formData = new FormData();\r\n\r\n        //assign state value to formData\r\n        formData.append(\"image\", image.value);\r\n        formData.append(\"name\", name.value);\r\n        formData.append(\"desc\", desc.value);\r\n        formData.append(\"price\", price.value);\r\n        formData.append(\"category_id\", category_id.value);\r\n\r\n        //store data with API\r\n        await api.post('/api/products', formData)\r\n        .then(() => {\r\n            //redirect\r\n            router.push({ path: \"/dashboard/products\" });\r\n        })\r\n        .catch((error) => {\r\n            //assign response error data to state \"errors\"\r\n            errors.value = error.response.data;\r\n        });\r\n    };\r\n</script>\r\n\r\n<template>\r\n    <div class=\"container mt-5\">\r\n        <div class=\"row\">\r\n            <div class=\"col-md-12\">\r\n                <div class=\"card border-0 rounded shadow\">\r\n                    <div class=\"card-body\">\r\n                        <form @submit.prevent=\"storeProduct()\">\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label fw-bold\">Image</label>\r\n                                <input type=\"file\" class=\"form-control\" @change=\"handleFileChange($event)\">\r\n                                <div v-if=\"errors.image\" class=\"alert alert-danger mt-2\">\r\n                                    <span>{{ errors.image[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label fw-bold\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" v-model=\"name\" placeholder=\"name product\">\r\n                                <div v-if=\"errors.name\" class=\"alert alert-danger mt-2\">\r\n                                    <span>{{ errors.name[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"form-group mb-3\">\r\n                                <label for=\"select-category\">Select Category</label>\r\n                                <select v-model=\"category_id\" class=\"form-control\" id=\"select-category\">\r\n                                <option  v-for=\"category in categoryStore.categories\" :key=\"category.id\" :value=\"category.id\">{{ category.name }}</option>\r\n\r\n                                </select>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label fw-bold\">Price</label>\r\n                                <input type=\"number\" class=\"form-control\" v-model=\"price\" placeholder=\"price product\">\r\n                                <div v-if=\"errors.price\" class=\"alert alert-danger mt-2\">\r\n                                    <span>{{ errors.price[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label fw-bold\">Description</label>\r\n                                <textarea class=\"form-control\" v-model=\"desc\" rows=\"5\" placeholder=\"desc product\"></textarea>\r\n                                <div v-if=\"errors.desc\" class=\"alert alert-danger mt-2\">\r\n                                    <span>{{ errors.desc[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button type=\"submit\" class=\"btn btn-md btn-primary rounded-sm shadow border-0\">Save</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>"],"mappings":";AACI,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,QAAQ,oBAAoB;AAChD;AACA,OAAOC,GAAG,MAAM,WAAW;AAC3B,SAASC,SAAS,QAAQ,YAAY;;AAEtC;;;;;;;;IACA,MAAMC,MAAM,GAAGD,SAAS,CAAC,CAAC;IAE1B,MAAME,aAAa,GAAGJ,WAAW,CAAC,CAAC;IACnC,MAAMK,YAAY,GAAGN,WAAW,CAAC,CAAC;;IAElC;IACA,MAAMO,KAAK,GAAGC,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMC,IAAI,GAAGD,GAAG,CAAC,EAAE,CAAC;IACpB,MAAME,IAAI,GAAGF,GAAG,CAAC,EAAE,CAAC;IACpB,MAAMG,KAAK,GAAGH,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMI,WAAW,GAAGJ,GAAG,CAAC,EAAE,CAAC;IAE3B,MAAMK,MAAM,GAAGL,GAAG,CAAC,EAAE,CAAC;;IAEtB;IACA,MAAMM,gBAAgB,GAAIC,CAAC,IAAK;MAC5B;MACAR,KAAK,CAACS,KAAK,GAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IACnC,CAAC;;IAED;IACA,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;MAE7B;MACA,IAAIC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;;MAE7B;MACAD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEf,KAAK,CAACS,KAAK,CAAC;MACrCI,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEb,IAAI,CAACO,KAAK,CAAC;MACnCI,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEZ,IAAI,CAACM,KAAK,CAAC;MACnCI,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEX,KAAK,CAACK,KAAK,CAAC;MACrCI,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAEV,WAAW,CAACI,KAAK,CAAC;;MAEjD;MACA,MAAMd,GAAG,CAACqB,IAAI,CAAC,eAAe,EAAEH,QAAQ,CAAC,CACxCI,IAAI,CAAC,MAAM;QACR;QACApB,MAAM,CAACqB,IAAI,CAAC;UAAEC,IAAI,EAAE;QAAsB,CAAC,CAAC;MAChD,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAK;QACd;QACAf,MAAM,CAACG,KAAK,GAAGY,KAAK,CAACC,QAAQ,CAACC,IAAI;MACtC,CAAC,CAAC;IACN,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}