{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from \"vue\";\n\n//import router\nimport { useRouter, useRoute } from 'vue-router';\n\n//import api\nimport api from \"../../api\";\n\n//init router\n\nexport default {\n  __name: 'EditProduct',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n\n    //import ref\n    const router = useRouter();\n\n    //init route\n    const route = useRoute();\n\n    //define state\n    const image = ref(\"\");\n    const name = ref(\"\");\n    const desc = ref(\"\");\n    const category_id = ref(\"\");\n    const price = ref(\"\");\n    const errors = ref([]);\n\n    //onMounted\n    onMounted(async () => {\n      //fetch detail data post by ID\n      await api.get(`/api/posts/${route.params.id}`).then(response => {\n        //set response data to state\n        title.value = response.data.data.title;\n        content.value = response.data.data.content;\n      });\n    });\n\n    //method for handle file changes\n    const handleFileChange = e => {\n      //assign file to state\n      image.value = e.target.files[0];\n    };\n\n    //method \"updatePost\"\n    const updatePost = async () => {\n      //init formData\n      let formData = new FormData();\n\n      //assign state value to formData\n      formData.append(\"image\", image.value);\n      formData.append(\"title\", title.value);\n      formData.append(\"content\", content.value);\n      formData.append(\"_method\", \"PATCH\");\n\n      //store data with API\n      await api.post(`/api/posts/${route.params.id}`, formData).then(() => {\n        //redirect\n        router.push({\n          path: \"/posts\"\n        });\n      }).catch(error => {\n        //assign response error data to state \"errors\"\n        errors.value = error.response.data;\n      });\n    };\n    const __returned__ = {\n      router,\n      route,\n      image,\n      name,\n      desc,\n      category_id,\n      price,\n      errors,\n      handleFileChange,\n      updatePost,\n      ref,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get useRoute() {\n        return useRoute;\n      },\n      get api() {\n        return api;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRouter","useRoute","api","router","route","image","name","desc","category_id","price","errors","get","params","id","then","response","title","value","data","content","handleFileChange","e","target","files","updatePost","formData","FormData","append","post","push","path","catch","error"],"sources":["E:/Programming/PROJECT/sm-putra/smputra-frontend/src/views/dashboard/EditProduct.vue"],"sourcesContent":["<script setup>\r\n    //import ref\r\n    import { ref, onMounted } from \"vue\";\r\n\r\n    //import router\r\n    import { useRouter, useRoute } from 'vue-router';\r\n\r\n    //import api\r\n    import api from \"../../api\";\r\n\r\n    //init router\r\n    const router = useRouter();\r\n\r\n    //init route\r\n    const route = useRoute();\r\n    \r\n    //define state\r\n    const image = ref(\"\");\r\n    const name = ref(\"\");\r\n    const desc = ref(\"\");\r\n    const category_id = ref(\"\");\r\n    const price = ref(\"\");\r\n    const errors = ref([]);\r\n\r\n    //onMounted\r\n    onMounted( async () => {\r\n\r\n        //fetch detail data post by ID\r\n        await api.get(`/api/posts/${route.params.id}`)\r\n        .then(response => {\r\n            \r\n            //set response data to state\r\n            title.value = response.data.data.title\r\n            content.value = response.data.data.content\r\n        });\r\n    })\r\n\r\n    //method for handle file changes\r\n    const handleFileChange = (e) => {\r\n        //assign file to state\r\n        image.value = e.target.files[0];\r\n    };\r\n\r\n    //method \"updatePost\"\r\n    const updatePost = async () => {\r\n\r\n        //init formData\r\n        let formData = new FormData();\r\n\r\n        //assign state value to formData\r\n        formData.append(\"image\", image.value);\r\n        formData.append(\"title\", title.value);\r\n        formData.append(\"content\", content.value);\r\n        formData.append(\"_method\", \"PATCH\");\r\n\r\n        //store data with API\r\n        await api.post(`/api/posts/${route.params.id}`, formData)\r\n        .then(() => {\r\n            //redirect\r\n            router.push({ path: \"/posts\" });\r\n        })\r\n        .catch((error) => {\r\n            //assign response error data to state \"errors\"\r\n            errors.value = error.response.data;\r\n        });\r\n    };\r\n</script>\r\n\r\n<template>\r\n    <div class=\"container mt-5\">\r\n        <div class=\"row\">\r\n            <div class=\"col-md-12\">\r\n                <div class=\"card border-0 rounded shadow\">\r\n                    <div class=\"card-body\">\r\n                        <form @submit.prevent=\"updatePost()\">\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label fw-bold\">Image</label>\r\n                                <input type=\"file\" class=\"form-control\" @change=\"handleFileChange($event)\">\r\n                                <div v-if=\"errors.image\" class=\"alert alert-danger mt-2\">\r\n                                    <span>{{ errors.image[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label fw-bold\">Title</label>\r\n                                <input type=\"text\" class=\"form-control\" v-model=\"title\" placeholder=\"Title Post\">\r\n                                <div v-if=\"errors.title\" class=\"alert alert-danger mt-2\">\r\n                                    <span>{{ errors.title[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label fw-bold\">Content</label>\r\n                                <textarea class=\"form-control\" v-model=\"content\" rows=\"5\" placeholder=\"Content Post\"></textarea>\r\n                                <div v-if=\"errors.content\" class=\"alert alert-danger mt-2\">\r\n                                    <span>{{ errors.content[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <button type=\"submit\" class=\"btn btn-md btn-primary rounded-sm shadow border-0\">Update</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>"],"mappings":";AAEI,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;;AAEpC;AACA,SAASC,SAAS,EAAEC,QAAQ,QAAQ,YAAY;;AAEhD;AACA,OAAOC,GAAG,MAAM,WAAW;;AAE3B;;;;;;;;;IATA;IAUA,MAAMC,MAAM,GAAGH,SAAS,CAAC,CAAC;;IAE1B;IACA,MAAMI,KAAK,GAAGH,QAAQ,CAAC,CAAC;;IAExB;IACA,MAAMI,KAAK,GAAGP,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMQ,IAAI,GAAGR,GAAG,CAAC,EAAE,CAAC;IACpB,MAAMS,IAAI,GAAGT,GAAG,CAAC,EAAE,CAAC;IACpB,MAAMU,WAAW,GAAGV,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAMW,KAAK,GAAGX,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMY,MAAM,GAAGZ,GAAG,CAAC,EAAE,CAAC;;IAEtB;IACAC,SAAS,CAAE,YAAY;MAEnB;MACA,MAAMG,GAAG,CAACS,GAAG,CAAE,cAAaP,KAAK,CAACQ,MAAM,CAACC,EAAG,EAAC,CAAC,CAC7CC,IAAI,CAACC,QAAQ,IAAI;QAEd;QACAC,KAAK,CAACC,KAAK,GAAGF,QAAQ,CAACG,IAAI,CAACA,IAAI,CAACF,KAAK;QACtCG,OAAO,CAACF,KAAK,GAAGF,QAAQ,CAACG,IAAI,CAACA,IAAI,CAACC,OAAO;MAC9C,CAAC,CAAC;IACN,CAAC,CAAC;;IAEF;IACA,MAAMC,gBAAgB,GAAIC,CAAC,IAAK;MAC5B;MACAhB,KAAK,CAACY,KAAK,GAAGI,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IACnC,CAAC;;IAED;IACA,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;MAE3B;MACA,IAAIC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;;MAE7B;MACAD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEtB,KAAK,CAACY,KAAK,CAAC;MACrCQ,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEX,KAAK,CAACC,KAAK,CAAC;MACrCQ,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAER,OAAO,CAACF,KAAK,CAAC;MACzCQ,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAE,OAAO,CAAC;;MAEnC;MACA,MAAMzB,GAAG,CAAC0B,IAAI,CAAE,cAAaxB,KAAK,CAACQ,MAAM,CAACC,EAAG,EAAC,EAAEY,QAAQ,CAAC,CACxDX,IAAI,CAAC,MAAM;QACR;QACAX,MAAM,CAAC0B,IAAI,CAAC;UAAEC,IAAI,EAAE;QAAS,CAAC,CAAC;MACnC,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAK;QACd;QACAtB,MAAM,CAACO,KAAK,GAAGe,KAAK,CAACjB,QAAQ,CAACG,IAAI;MACtC,CAAC,CAAC;IACN,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}