{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from \"vue\";\n\n//import router\nimport { useRouter, useRoute } from 'vue-router';\n\n//import api\nimport api from \"../../api\";\n\n//init router\n\nexport default {\n  __name: 'EditProduct',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n\n    //import ref\n    const router = useRouter();\n\n    //init route\n    const route = useRoute();\n\n    //define state\n    const image = ref(\"\");\n    const name = ref(\"\");\n    const desc = ref(\"\");\n    const category_id = ref(\"\");\n    const price = ref(\"\");\n    const errors = ref([]);\n\n    //onMounted\n    onMounted(async () => {\n      //fetch detail data post by ID\n      await api.get(`/api/products/${route.params.id}`).then(response => {\n        //set response data to state\n        name.value = response.data.data.data.name;\n        desc.value = response.data.data.data.desc;\n        category_id.value = response.data.data.data.category_id;\n        price.value = response.data.data.data.price;\n      });\n    });\n\n    //method for handle file changes\n    const handleFileChange = e => {\n      //assign file to state\n      image.value = e.target.files[0];\n    };\n\n    //method \"updateProduct\"\n    const updateProduct = async () => {\n      //init formData\n      let formData = new FormData();\n\n      //assign state value to formData\n      formData.append(\"image\", image.value);\n      formData.append(\"name\", name.value);\n      formData.append(\"desc\", desc.value);\n      formData.append(\"price\", price.value);\n      formData.append(\"category_id\", category_id.value);\n      formData.append(\"_method\", \"PATCH\");\n\n      //store data with API\n      await api.post(`/api/products/${route.params.id}`, formData).then(() => {\n        //redirect\n        router.push({\n          path: \"/dashboard/products\"\n        });\n      }).catch(error => {\n        //assign response error data to state \"errors\"\n        errors.value = error.response.data;\n      });\n    };\n    const __returned__ = {\n      router,\n      route,\n      image,\n      name,\n      desc,\n      category_id,\n      price,\n      errors,\n      handleFileChange,\n      updateProduct,\n      ref,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get useRoute() {\n        return useRoute;\n      },\n      get api() {\n        return api;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRouter","useRoute","api","router","route","image","name","desc","category_id","price","errors","get","params","id","then","response","value","data","handleFileChange","e","target","files","updateProduct","formData","FormData","append","post","push","path","catch","error"],"sources":["E:/Programming/PROJECT/sm-putra/smputra-frontend/src/views/dashboard/EditProduct.vue"],"sourcesContent":["<script setup>\r\n    //import ref\r\n    import { ref, onMounted } from \"vue\";\r\n\r\n    //import router\r\n    import { useRouter, useRoute } from 'vue-router';\r\n\r\n    //import api\r\n    import api from \"../../api\";\r\n\r\n    //init router\r\n    const router = useRouter();\r\n\r\n    //init route\r\n    const route = useRoute();\r\n    \r\n    //define state\r\n    const image = ref(\"\");\r\n    const name = ref(\"\");\r\n    const desc = ref(\"\");\r\n    const category_id = ref(\"\");\r\n    const price = ref(\"\");\r\n    const errors = ref([]);\r\n\r\n    //onMounted\r\n    onMounted( async () => {\r\n\r\n        //fetch detail data post by ID\r\n        await api.get(`/api/products/${route.params.id}`)\r\n        .then(response => {\r\n            \r\n            //set response data to state\r\n            name.value = response.data.data.data.name\r\n            desc.value = response.data.data.data.desc\r\n            category_id.value = response.data.data.data.category_id\r\n            price.value = response.data.data.data.price\r\n        });\r\n    })\r\n\r\n    //method for handle file changes\r\n    const handleFileChange = (e) => {\r\n        //assign file to state\r\n        image.value = e.target.files[0];\r\n    };\r\n\r\n    //method \"updateProduct\"\r\n    const updateProduct = async () => {\r\n\r\n        //init formData\r\n        let formData = new FormData();\r\n\r\n        //assign state value to formData\r\n        formData.append(\"image\", image.value);\r\n        formData.append(\"name\", name.value);\r\n        formData.append(\"desc\", desc.value);\r\n        formData.append(\"price\", price.value);\r\n        formData.append(\"category_id\", category_id.value);\r\n        formData.append(\"_method\", \"PATCH\");\r\n\r\n        //store data with API\r\n        await api.post(`/api/products/${route.params.id}`, formData)\r\n        .then(() => {\r\n            //redirect\r\n            router.push({ path: \"/dashboard/products\" });\r\n        })\r\n        .catch((error) => {\r\n            //assign response error data to state \"errors\"\r\n            errors.value = error.response.data;\r\n        });\r\n    };\r\n</script>\r\n\r\n<template>\r\n    <div class=\"container mt-5\">\r\n        <div class=\"row\">\r\n            <div class=\"col-md-12\">\r\n                <div class=\"card border-0 rounded shadow\">\r\n                    <div class=\"card-body\">\r\n                        <form @submit.prevent=\"updateProduct()\">\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label fw-bold\">Image</label>\r\n                                <input type=\"file\" class=\"form-control\" @change=\"handleFileChange($event)\">\r\n                                <div v-if=\"errors.image\" class=\"alert alert-danger mt-2\">\r\n                                    <span>{{ errors.image[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label fw-bold\">Product Name</label>\r\n                                <input type=\"text\" class=\"form-control\" v-model=\"name\" placeholder=\"name Post\">\r\n                                <div v-if=\"errors.name\" class=\"alert alert-danger mt-2\">\r\n                                    <span>{{ errors.name[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"form-group mb-3\">\r\n                                <label for=\"select-category\">Select Category</label>\r\n                                <select v-model=\"category_id\" class=\"form-control\" id=\"select-category\">\r\n                                <option>1</option>\r\n                                <option>2</option>\r\n                                <option>3</option>\r\n                                </select>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label fw-bold\">Price</label>\r\n                                <input type=\"number\" class=\"form-control\" v-model=\"price\" placeholder=\"price product\">\r\n                                <div v-if=\"errors.price\" class=\"alert alert-danger mt-2\">\r\n                                    <span>{{ errors.price[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label fw-bold\">desc</label>\r\n                                <textarea class=\"form-control\" v-model=\"desc\" rows=\"5\" placeholder=\"desc Post\"></textarea>\r\n                                <div v-if=\"errors.desc\" class=\"alert alert-danger mt-2\">\r\n                                    <span>{{ errors.desc[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <button type=\"submit\" class=\"btn btn-md btn-primary rounded-sm shadow border-0\">Update</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>"],"mappings":";AAEI,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;;AAEpC;AACA,SAASC,SAAS,EAAEC,QAAQ,QAAQ,YAAY;;AAEhD;AACA,OAAOC,GAAG,MAAM,WAAW;;AAE3B;;;;;;;;;IATA;IAUA,MAAMC,MAAM,GAAGH,SAAS,CAAC,CAAC;;IAE1B;IACA,MAAMI,KAAK,GAAGH,QAAQ,CAAC,CAAC;;IAExB;IACA,MAAMI,KAAK,GAAGP,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMQ,IAAI,GAAGR,GAAG,CAAC,EAAE,CAAC;IACpB,MAAMS,IAAI,GAAGT,GAAG,CAAC,EAAE,CAAC;IACpB,MAAMU,WAAW,GAAGV,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAMW,KAAK,GAAGX,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMY,MAAM,GAAGZ,GAAG,CAAC,EAAE,CAAC;;IAEtB;IACAC,SAAS,CAAE,YAAY;MAEnB;MACA,MAAMG,GAAG,CAACS,GAAG,CAAE,iBAAgBP,KAAK,CAACQ,MAAM,CAACC,EAAG,EAAC,CAAC,CAChDC,IAAI,CAACC,QAAQ,IAAI;QAEd;QACAT,IAAI,CAACU,KAAK,GAAGD,QAAQ,CAACE,IAAI,CAACA,IAAI,CAACA,IAAI,CAACX,IAAI;QACzCC,IAAI,CAACS,KAAK,GAAGD,QAAQ,CAACE,IAAI,CAACA,IAAI,CAACA,IAAI,CAACV,IAAI;QACzCC,WAAW,CAACQ,KAAK,GAAGD,QAAQ,CAACE,IAAI,CAACA,IAAI,CAACA,IAAI,CAACT,WAAW;QACvDC,KAAK,CAACO,KAAK,GAAGD,QAAQ,CAACE,IAAI,CAACA,IAAI,CAACA,IAAI,CAACR,KAAK;MAC/C,CAAC,CAAC;IACN,CAAC,CAAC;;IAEF;IACA,MAAMS,gBAAgB,GAAIC,CAAC,IAAK;MAC5B;MACAd,KAAK,CAACW,KAAK,GAAGG,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IACnC,CAAC;;IAED;IACA,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;MAE9B;MACA,IAAIC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;;MAE7B;MACAD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEpB,KAAK,CAACW,KAAK,CAAC;MACrCO,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEnB,IAAI,CAACU,KAAK,CAAC;MACnCO,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAElB,IAAI,CAACS,KAAK,CAAC;MACnCO,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEhB,KAAK,CAACO,KAAK,CAAC;MACrCO,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAEjB,WAAW,CAACQ,KAAK,CAAC;MACjDO,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAE,OAAO,CAAC;;MAEnC;MACA,MAAMvB,GAAG,CAACwB,IAAI,CAAE,iBAAgBtB,KAAK,CAACQ,MAAM,CAACC,EAAG,EAAC,EAAEU,QAAQ,CAAC,CAC3DT,IAAI,CAAC,MAAM;QACR;QACAX,MAAM,CAACwB,IAAI,CAAC;UAAEC,IAAI,EAAE;QAAsB,CAAC,CAAC;MAChD,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAK;QACd;QACApB,MAAM,CAACM,KAAK,GAAGc,KAAK,CAACf,QAAQ,CAACE,IAAI;MACtC,CAAC,CAAC;IACN,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}