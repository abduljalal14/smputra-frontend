{"ast":null,"code":"import { useCart } from '@/store/cart';\nimport { formatPrice } from \"@/utils/currency\";\nimport { useOrder } from '@/store/order';\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useContact } from '@/store/contact';\nexport default {\n  __name: 'IndexView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const cartStore = useCart();\n    const router = useRouter();\n    const orderStore = useOrder();\n    const contactStore = useContact();\n    const makeOrder = () => {\n      const listItem = ref(``);\n      const grandTotal = ref();\n      if (orderStore.orderMethod == 'COD') {\n        grandTotal.value = cartStore.calculateTotalSubtotal + orderStore.ongkir;\n      } else {\n        grandTotal.value = cartStore.calculateTotalSubtotal;\n      }\n      orderStore.storeOrder(router, cartStore.cartItems);\n      orderStore.fetchDataOrderById(orderStore.orderId);\n      cartStore.cartItems.forEach(cartItem => {\n        listItem.value += `- ${cartItem.product.name} ${cartItem.qty}x@${cartItem.product.price} : Rp. ${cartItem.qty * cartItem.product.price}\\n`;\n      });\n      contactStore.openWhatsApp(orderStore.customerName, orderStore.customerPhone, orderStore.customerAddres, orderStore.storeLocation, orderStore.orderMethod, cartStore.cartItems, grandTotal.value, orderStore.orderId, orderStore.order.id, listItem.value);\n      cartStore.reset();\n      orderStore.reset();\n    };\n    const __returned__ = {\n      cartStore,\n      router,\n      orderStore,\n      contactStore,\n      makeOrder,\n      get useCart() {\n        return useCart;\n      },\n      get formatPrice() {\n        return formatPrice;\n      },\n      get useOrder() {\n        return useOrder;\n      },\n      ref,\n      get useRouter() {\n        return useRouter;\n      },\n      get useContact() {\n        return useContact;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["useCart","formatPrice","useOrder","ref","useRouter","useContact","cartStore","router","orderStore","contactStore","makeOrder","listItem","grandTotal","orderMethod","value","calculateTotalSubtotal","ongkir","storeOrder","cartItems","fetchDataOrderById","orderId","forEach","cartItem","product","name","qty","price","openWhatsApp","customerName","customerPhone","customerAddres","storeLocation","order","id","reset"],"sources":["E:/Programming/PROJECT/sm-putra/smputra-frontend/src/views/checkout/IndexView.vue"],"sourcesContent":["<template lang=\"\">\r\n    <br>\r\n    <br>\r\n    <br>\r\n<section class=\"mb-lg-14 mb-8 mt-5\">\r\n            <div class=\"container\">\r\n               <!-- row -->\r\n               <div class=\"row\">\r\n                  <!-- col -->\r\n                  <div class=\"col-12\">\r\n                     <div>\r\n                        <div class=\"mb-8\">\r\n                           <!-- text -->\r\n                           <h1 class=\"fw-bold mb-0\">Checkout</h1>\r\n                        </div>\r\n                     </div>\r\n                  </div>\r\n               </div>\r\n               <div>\r\n                  <!-- row -->\r\n                  <div class=\"row\">\r\n                     <div class=\"col-lg-6 col-md-12\">\r\n                           <div class=\"px-6 py-4 card shadow-sm\">\r\n                              <h5 class=\" bg-transparent mb-2\">Isi Form Pemesan</h5>\r\n                        <!-- Nama -->\r\n                        <div class=\"mb-3\">\r\n                        <label class=\"form-label\" for=\"textInput\">Nama</label>\r\n                        <input v-model=\"orderStore.customerName\" type=\"text\" id=\"name-input\" class=\"form-control\" placeholder=\"Nama\">\r\n                        </div>\r\n                        <!-- Phone Input --> \r\n                        <div class=\"mb-3\"> \r\n                        <label for=\"telinput\" class=\"form-label\">No. Handphone</label>\r\n                        <input v-model=\"orderStore.customerPhone\" class=\"form-control\" type=\"tel\" id=\"telinput\">\r\n                        </div>\r\n                        <!-- Textarea -->\r\n                        <div class=\"mb-3\">\r\n                        <label for=\"textarea-input\" class=\"form-label\">Alamat Lengkap</label>\r\n                        <textarea v-model=\"orderStore.customerAddres\" class=\"form-control\" id=\"addres-input\" rows=\"5\"></textarea>\r\n                        </div>\r\n\r\n                        <!-- Pilih Toko -->\r\n                        <div class=\"mb-3\">\r\n                        <label class=\"form-label\" for=\"selectOne\">Pilih Toko</label>\r\n                        <select v-model=\"orderStore.storeLocation\" class=\"form-select\" aria-label=\"Default select example\">\r\n                            <option value=\"Sari Mulya Pasarbatang\">Toko Sari Mulya Pasarbatang</option>\r\n                            <option value=\"Sari Mulya Limbangan\">Toko Sari Mulya Limbangan</option>\r\n                        </select>\r\n                        </div>\r\n                        <!-- Pilih Metode -->\r\n                        <div class=\"mb-3\">\r\n                        <label class=\"form-label\" for=\"selectOne\">Pilih Metode Pengiriman</label>\r\n                        <select v-model=\"orderStore.orderMethod\" class=\"form-select\" aria-label=\"Default select example\">\r\n                            <option value=\"COD\">COD</option>\r\n                            <option value=\"Ambil ke Toko\">Ambil ke Toko</option>\r\n                        </select>\r\n                        </div>\r\n                     </div>\r\n                        </div>\r\n\r\n                     <div class=\"col-12 col-md-12  col-lg-6\">\r\n                        <div class=\"mt-4 mt-lg-0\">\r\n                           <div class=\"card shadow-sm\">\r\n                              <h5 class=\"px-6 py-4 bg-transparent mb-0\">Detail Pesanan</h5>\r\n                              <ul class=\"list-group list-group-flush\">\r\n                                 <!-- list group item -->\r\n                                 <li v-for=\"(cartItem, index) in cartStore.cartItems\" :key=\"index\" class=\"list-group-item px-4 py-3\">\r\n                                    <div class=\"row align-items-center\">\r\n                                       <div class=\"col-2 col-md-2\"> \r\n                                          <img v-bind:src=\"cartItem.product.image\" alt=\"Ecommerce\" class=\"img-fluid\">\r\n                                       </div>\r\n                                       <div class=\"col-5 col-md-5\">\r\n                                          <h6 class=\"mb-0\">{{ cartItem.product.name }}</h6>\r\n                                          <span><small class=\"text-muted\">{{ cartItem.product.category.name }}</small></span>\r\n                                       </div>\r\n                                       <div class=\"col-2 col-md-2 text-center text-muted\">\r\n                                          <span>{{  cartItem.qty }}</span>\r\n                                       </div>\r\n                                       <div class=\"col-3 text-lg-end text-start text-md-end col-md-3\">\r\n                                          <span class=\"fw-bold\">{{ formatPrice(cartItem.subtotal) }}</span>\r\n                                       </div>\r\n                                    </div>\r\n                                 </li>\r\n                              </ul>\r\n\r\n                              <h5 class=\"px-6 py-4 bg-transparent mb-0\">Keterangan</h5>\r\n                              <div class=\"card mb-2\">\r\n     <!-- list group -->\r\n     <ul class=\"list-group list-group-flush\">\r\n        <!-- list group item -->\r\n        <li class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n           <div class=\"me-auto\">\r\n              <div>Item Subtotal</div>\r\n           </div>\r\n           <span>{{ formatPrice(cartStore.calculateTotalSubtotal) }}</span>\r\n        </li>\r\n        <!-- list group item -->\r\n   <li v-if=\"orderStore.orderMethod == 'COD'\" class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n      <div class=\"me-auto\">\r\n         <div>Biaya Ongkir</div>\r\n      </div>\r\n      <span>Rp. {{ orderStore.ongkir }}</span>\r\n   </li>\r\n   <!-- list group item -->\r\n   <li class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n      <div class=\"me-auto\">\r\n         <div class=\"fw-bold\">Total</div>\r\n      </div>\r\n      <span v-if=\"orderStore.orderMethod != 'COD'\" class=\"fw-bold\">{{ formatPrice(cartStore.calculateTotalSubtotal) }}</span>\r\n      <span v-else class=\"fw-bold\">{{ formatPrice(cartStore.calculateTotalSubtotal+orderStore.ongkir) }}</span>\r\n   </li>\r\n    </ul>\r\n </div>\r\n <div class=\"d-grid mb-1 mt-4\">\r\n    <!-- btn -->\r\n<div v-if=\"orderStore.invalid || cartStore.cartItems.length === 0\" class=\"alert alert-danger\" role=\"alert\">Lengkapi Data untuk melakukan Checkout</div>\r\n   <button v-else class=\"btn btn-primary btn-lg d-flex justify-content-between align-items-center\" type=\"submit\" data-bs-toggle=\"modal\" data-bs-target=\"#detailOrderModal\">\r\n    Go to Checkout \r\n    <span v-if=\"orderStore.orderMethod == 'COD'\" class=\"fw-bold\">{{ formatPrice(cartStore.calculateTotalSubtotal+orderStore.ongkir) }}</span>\r\n    <span v-else class=\"fw-bold\">{{ formatPrice(cartStore.calculateTotalSubtotal) }}</span>\r\n   </button>\r\n </div>\r\n                              \r\n                           </div>\r\n                        </div>\r\n                     </div>\r\n                  </div>\r\n               </div>\r\n            </div>\r\n         </section>\r\n\r\n<!-- detail accept order  -->\r\n<div class=\"modal fade\" id=\"detailOrderModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-sm modal-dialog-scrollable\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\" id=\"exampleModalLabel\">Data Pemesan</h5>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <pre>\r\n            <h3 class=\"text-center\">INVOICE</h3>\r\n            <ul class=\"list-group\">\r\n            <li class=\"list-group-item active\">Detail Customer</li>\r\n            <li class=\"list-group-item\">Nama    : {{ orderStore.customerName }}</li>\r\n            <li class=\"list-group-item\">No. HP  : {{ orderStore.customerPhone }}</li>\r\n            <li class=\"list-group-item\">Alamat  : {{ orderStore.customerAddres }}</li>\r\n            <li class=\"list-group-item active\">Toko & Metode</li>\r\n            <li class=\"list-group-item\">Toko    : {{ orderStore.storeLocation }}</li>\r\n            <li class=\"list-group-item\">Metode  : {{ orderStore.orderMethod }}</li>\r\n            <li class=\"list-group-item active\">Daftar Belanjaan</li>\r\n            <li v-for=\"(cartItem, index) in cartStore.cartItems\" :key=\"index\" class=\"list-group-item\">{{ cartItem.product.name }} {{ cartItem.qty }}x@{{ cartItem.product.price }} : {{ cartItem.product.price* cartItem.qty }}</li>\r\n            \r\n            <li v-if=\"orderStore.orderMethod == 'COD'\" class=\"list-group-item\">Ongkos Kirim  : {{ orderStore.ongkir }}</li>\r\n            <li v-if=\"orderStore.orderMethod == 'COD'\" class=\"list-group-item active\"><h4 class=\"ml-auto\" >Total  : {{ formatPrice(cartStore.calculateTotalSubtotal+orderStore.ongkir) }}</h4></li>\r\n            <li v-else class=\"list-group-item active\"><h4 class=\"ml-auto\" >Total  : {{ formatPrice(cartStore.calculateTotalSubtotal) }}</h4></li>\r\n         </ul> \r\n        </pre>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n         <div data-bs-dismiss=\"modal\" >\r\n            <button @click=\"makeOrder()\" type=\"submit\" class=\"btn btn-success btn-lg d-flex justify-content-between align-items-center\">Buat Pesanan</button>\r\n         </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n<script setup>\r\nimport { useCart } from '@/store/cart'\r\nimport { formatPrice } from \"@/utils/currency\";\r\nimport { useOrder } from '@/store/order'\r\nimport { ref } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { useContact } from '@/store/contact'\r\n\r\nconst cartStore = useCart()\r\n\r\nconst router = useRouter()\r\nconst orderStore = useOrder()\r\n\r\nconst contactStore = useContact()\r\n\r\n\r\nconst makeOrder = () => {\r\n   const listItem = ref(``);\r\n   const grandTotal = ref();\r\n\r\n   if (orderStore.orderMethod == 'COD') {\r\n      grandTotal.value = cartStore.calculateTotalSubtotal+orderStore.ongkir\r\n   } else {\r\n      grandTotal.value = cartStore.calculateTotalSubtotal\r\n   }\r\n   orderStore.storeOrder(router, cartStore.cartItems)\r\n   orderStore.fetchDataOrderById(orderStore.orderId)\r\n       cartStore.cartItems.forEach(cartItem => {\r\n       listItem.value += `- ${cartItem.product.name} ${cartItem.qty}x@${cartItem.product.price} : Rp. ${cartItem.qty*cartItem.product.price}\\n`;\r\n       });   \r\n  contactStore.openWhatsApp(orderStore.customerName,orderStore.customerPhone,orderStore.customerAddres,orderStore.storeLocation,orderStore.orderMethod,cartStore.cartItems,grandTotal.value,orderStore.orderId,orderStore.order.id,listItem.value)\r\n  cartStore.reset()\r\n  orderStore.reset()\r\n};\r\n  \r\n\r\n\r\n\r\n\r\n\r\n</script>\r\n\r\n\r\n<style lang=\"css\">\r\n.whatsapp-ico{\r\n    fill: white;\r\n    width: 50px;\r\n    height: 50px;\r\n    padding: 3px;\r\n    background-color: #4dc247;\r\n    border-radius: 50%;\r\n    box-shadow: 2px 2px 6px rgba(0,0,0,0.4);\r\n    /* box-shadow: 2px 2px 11px rgba(0,0,0,0.7); */\r\n    position: fixed;\r\n    bottom: 20px;\r\n    right : 20px;\r\n    z-index: 10;\r\n}\r\n\r\n.whatsapp-ico:hover{\r\n    box-shadow: 2px 2px 11px rgba(0,0,0,0.7);\r\n}\r\n</style>"],"mappings":"AAwKA,SAASA,OAAO,QAAQ,cAAc;AACtC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,QAAQ,QAAQ,eAAe;AACxC,SAASC,GAAG,QAAQ,KAAK;AACzB,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,UAAU,QAAQ,iBAAiB;;;;;;;IAE5C,MAAMC,SAAS,GAAGN,OAAO,CAAC,CAAC;IAE3B,MAAMO,MAAM,GAAGH,SAAS,CAAC,CAAC;IAC1B,MAAMI,UAAU,GAAGN,QAAQ,CAAC,CAAC;IAE7B,MAAMO,YAAY,GAAGJ,UAAU,CAAC,CAAC;IAGjC,MAAMK,SAAS,GAAGA,CAAA,KAAM;MACrB,MAAMC,QAAQ,GAAGR,GAAG,CAAE,EAAC,CAAC;MACxB,MAAMS,UAAU,GAAGT,GAAG,CAAC,CAAC;MAExB,IAAIK,UAAU,CAACK,WAAW,IAAI,KAAK,EAAE;QAClCD,UAAU,CAACE,KAAK,GAAGR,SAAS,CAACS,sBAAsB,GAACP,UAAU,CAACQ,MAAM;MACxE,CAAC,MAAM;QACJJ,UAAU,CAACE,KAAK,GAAGR,SAAS,CAACS,sBAAsB;MACtD;MACAP,UAAU,CAACS,UAAU,CAACV,MAAM,EAAED,SAAS,CAACY,SAAS,CAAC;MAClDV,UAAU,CAACW,kBAAkB,CAACX,UAAU,CAACY,OAAO,CAAC;MAC7Cd,SAAS,CAACY,SAAS,CAACG,OAAO,CAACC,QAAQ,IAAI;QACxCX,QAAQ,CAACG,KAAK,IAAK,KAAIQ,QAAQ,CAACC,OAAO,CAACC,IAAK,IAAGF,QAAQ,CAACG,GAAI,KAAIH,QAAQ,CAACC,OAAO,CAACG,KAAM,UAASJ,QAAQ,CAACG,GAAG,GAACH,QAAQ,CAACC,OAAO,CAACG,KAAM,IAAG;MACxI,CAAC,CAAC;MACPjB,YAAY,CAACkB,YAAY,CAACnB,UAAU,CAACoB,YAAY,EAACpB,UAAU,CAACqB,aAAa,EAACrB,UAAU,CAACsB,cAAc,EAACtB,UAAU,CAACuB,aAAa,EAACvB,UAAU,CAACK,WAAW,EAACP,SAAS,CAACY,SAAS,EAACN,UAAU,CAACE,KAAK,EAACN,UAAU,CAACY,OAAO,EAACZ,UAAU,CAACwB,KAAK,CAACC,EAAE,EAACtB,QAAQ,CAACG,KAAK,CAAC;MAChPR,SAAS,CAAC4B,KAAK,CAAC,CAAC;MACjB1B,UAAU,CAAC0B,KAAK,CAAC,CAAC;IACpB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}